<div class="container">
    <div
        class="mt-3 alert alert-danger"
        *ngIf="loading"
    >
        Loading...
    </div>
    <div 
        class="mt-3 alert alert-danger"
        *ngIf="errorLoadingQuizzes"
    >
        <h3>Error loading quizzes!</h3>
    </div>
    <div class="row" *ngIf="!errorLoadingQuizzes">
        <div class="col-md-4">
            <button 
                class="btn btn-outline-success mt-3"
                (click)="addNewQuiz()"    
            >
                Add New Quiz
            </button>
            <div class="card mt-3">
                <div class="list-group">
                    <button
                        *ngFor="let quiz of quizzes"
                        class="list-group-item list-group-item-action d-flex justify-content-between"
                        [class.active]="quiz == selectedQuiz"
                        [style.text-decoration]="quiz.markedForDelete ? 'line-through' : 'inherit'"
                        (click)="selectQuiz(quiz)"
                    >
                        {{ (quiz === selectedQuiz) ? selectedQuiz.name : quiz.name}}

                        <small 
                            class="font-italic font-weight-lighter"
                            [class.text-warning]="quiz.questions.length == 0"
                        >
                            {{ quiz.questions.length }} question<span *ngIf="quiz.questions.length != 1">s</span>
                        </small>
                    </button>
                </div>
            </div>
        </div>
        <div 
            class="col-md-8 mt-3"
            *ngIf="selectedQuiz == undefined"    
        >
            <h3>No Quiz Selected</h3>
            <p class="alert alert-info">
                Select a Quiz!
                <button 
                    class="btn btn-link"
                    (click)="jsPromisesOne()"    
                >
                    JS Promises 1
                </button>
                <button 
                    class="btn btn-link"
                    (click)="jsPromisesTwo()"    
                >
                    JS Promises 2
                </button>
                <button 
                    class="btn btn-link"
                    (click)="jsPromisesThree()"    
                >
                    JS Promises 3
                </button>
            </p>
        </div>
        <div 
            class="col-md-8"
            *ngIf="selectedQuiz != undefined"
        >
            <button 
                class="btn btn-outline-dark mt-3"
                [class.btn-outline-dark]="deletedQuizCount + newlyAddedCount + editedQuizCount == 0"
                [class.btn-dark]="deletedQuizCount + newlyAddedCount + editedQuizCount > 0"
            >
                Save Quizzes
                <span 
                    [title]="deletedQuizTooltip"
                    class="badge badge-danger ml-1"
                    *ngIf="deletedQuizCount > 0"
                >
                    - {{ deletedQuizCount }}
                </span>
                <span 
                    [title]="newlyAddedQuizTooltip"
                    class="badge badge-success ml-1"
                    *ngIf="newlyAddedCount > 0"
                >
                    + {{ newlyAddedCount }}
                </span>
                <span 
                    [title]="editedQuizTooltip"
                    class="badge badge-light ml-1"
                    *ngIf="editedQuizCount > 0"
                >
                    * {{ editedQuizCount }}
                </span>
            </button>
            <button 
                class="btn btn-link mt-3"
                (click)="cancelAllChanges()"
            >Cancel All Changes</button>

            <div class="card mt-3">
                <div class="card-header">General</div>
                <div class="card-body">
                    <p>{{selectedQuiz.name}}</p>
                    <input type="text" [(ngModel)]="selectedQuiz.name">
                </div>
            </div>

            <div class="card mt-3">
                <div class="card-header">
                    Questions
                    <span class="ml-3 text-warning" 
                        *ngIf="selectedQuiz.questions.length == 0"
                    >
                        No questions
                    </span>
                </div>
                <div class="card-body">
                    <button 
                      class="btn btn-outline-success"
                      (click)="addNewQuestion()"
                    >
                      Add New Question
                    </button>
                    <div 
                      class="row mt-3"
                      *ngFor="let question of selectedQuiz.questions;"
                    >
                      <div class="col-md-10">
                        <input 
                            type="text"
                            class="form-control"
                            [(ngModel)]="question.name"
                        />
                      </div>
                      <div class="col-md-2">
                        <button 
                          class="btn btn-link text-danger" 
                          (click)="removeQuestion(question)"
                        >
                          Remove
                        </button>  
                      </div>
          
                    </div>
            </div>

            <div class="card mt-3">
                <div class="card-header">Other</div>
                <div class="card-body">
                    <div class="form-check">
                        <label class="form-check-label text-danger">
                            <input type="checkbox" class="form-check-input" name="" id="" [(ngModel)]="selectedQuiz.markedForDelete">
                            Mark for Delete
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>